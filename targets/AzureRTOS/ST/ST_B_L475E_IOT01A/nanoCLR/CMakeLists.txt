#
# Copyright (c) .NET Foundation and Contributors
# See LICENSE file in the project root for full license information.
#

# append nanoCLR source files
list(APPEND NANOCLR_PROJECT_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/main.c)
list(APPEND NANOCLR_PROJECT_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/nanoHAL.cpp)
list(APPEND NANOCLR_PROJECT_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/azure_config.h)
list(APPEND NANOCLR_PROJECT_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/nx_client.c)
list(APPEND NANOCLR_PROJECT_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/stm_networking.c)

# additional threadx threads
list(APPEND NANOCLR_PROJECT_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/blink_led_thread_define.c)
list(APPEND NANOCLR_PROJECT_SOURCES ${CMAKE_CURRENT_SOURCE_DIR}/azure_thread_define.c)  

# additional file from Azure Networking sample
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${BASE_PATH_FOR_PLATFORM}/ST/ST_B_L475E_IOT01A/lib/netx_driver/inventek)
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${BASE_PATH_FOR_PLATFORM}/ST/ST_B_L475E_IOT01A/lib/netxduo/common)
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${BASE_PATH_FOR_PLATFORM}/ST/ST_B_L475E_IOT01A/lib/netxduo/ports/cortex_m4/${THREADX_TOOLCHAIN}/inc)
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${BASE_PATH_FOR_PLATFORM}/ST/core/lib/jsmn/src)
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${BASE_PATH_FOR_PLATFORM}/ST/core/src)
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${BASE_PATH_FOR_PLATFORM}/ST/core/src/azure_iot_mqtt)
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${BASE_PATH_FOR_PLATFORM}/ST/core/src/azure_iot_nx)    
     
# get a list of netxduo include directories
FetchContent_GetProperties(netxduo)  
get_target_property(NETXDUO_INCLUDES azrtos::netxduo INCLUDE_DIRECTORIES)
list(APPEND NANOCLR_PROJECT_INCLUDE_DIRS ${NETXDUO_INCLUDES})

# make var global
set(NANOCLR_PROJECT_SOURCES ${NANOCLR_PROJECT_SOURCES} CACHE INTERNAL "make global")
set(NANOCLR_PROJECT_INCLUDE_DIRS ${NANOCLR_PROJECT_INCLUDE_DIRS} CACHE INTERNAL "make global")
